<header class="navbar bg-base-100 shadow-sm p-4 z-10" data-controller="mobile-menu">
    <div class="flex-1">
        <a class="text-xl link link-hover block w-fit" href="{{ path('app_home_index') }}">
            <img class="h-10" src="{{ asset('images/logo_only.svg') }}" alt="Gearloop Logo">
        </a>
    </div>
    <nav class="hidden sm:block">
        <div class="flex gap-8 justify-between">
            <div class="flex items-center gap-4">
                <a class="link link-hover" href="{{ path('app_explore_kits') }}">Explore</a>
                <a class="link link-hover" href="{{ path('app_explore_items') }}">Items</a>
            </div>
            {% if app.user %}
                <div class="flex items-center gap-4">
                    <a class="link link-hover" href="{{ path('app_kit_index') }}">My Kits</a>
                    <a class="link link-hover" href="{{ path('app_item_index') }}">My Items</a>
                </div>
            {% endif %}
            {% if app.user and app.user.admin %}
                <div>
                    <a class="link link-hover" href="{{ path('app_item_suggestions') }}">Item Suggestions</a>
                </div>
            {% endif %}
            <div class="flex items-center gap-4">
                {% if app.user %}
                    <a class="link link-hover" href="{{ path('app_profile_show') }}">{{ app.user.username }} ({{ app.user.email }})</a>
                    <a class="link link-hover" href="{{ path('app_logout') }}">Logout</a>
                {% else %}
                    <a class="link link-hover" href="{{ path('app_login') }}">Login</a>
                    <a class="link link-hover" href="{{ path('app_register') }}">Register</a>
                {% endif %}
            </div>
        </div>
    </nav>

    <button
        aria-controls="mobileMenu"
        aria-expanded="false"
        class="btn sm:hidden"
        data-mobile-menu-target="mobileMenuButton"
        data-action="click->mobile-menu#toggle"
    >
        <div class="size-4">
            {{ ux_icon('lucide:menu') }}
        </div>
    </button>

    <div data-mobile-menu-target="menu"
         class="fixed inset-0 z-50 transform -translate-y-full opacity-0 transition-all duration-300 ease-in-out mt-0"
         aria-hidden="true">
        <div data-mobile-menu-target="overlay"
             data-action="click->mobile-menu#close"
             class="absolute inset-0 bg-black/40 backdrop-blur-sm opacity-0 transition-opacity duration-300"></div>

        <aside class="absolute top-0 left-0 right-0 bg-base-100 shadow-lg max-h-[90vh] rounded-b-xl overflow-auto p-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                    <a class="text-xl link link-hover block w-fit" href="{{ path('app_home_index') }}">
                        <img class="h-10" src="{{ asset('images/logo_only.svg') }}" alt="Gearloop Logo">
                    </a>
                </div>
                <button data-action="click->mobile-menu#close" class="btn btn-ghost" aria-label="Close the menu">
                    <div class="size-4">
                        {{ ux_icon('lucide:x') }}
                    </div>
                </button>
            </div>

            <nav class="flex flex-col gap-4">
                    <a href="{{ path('app_home_index') }}" class="btn">Home</a>
                    <a href="{{ path('app_explore_kits') }}" class="btn">Explore</a>
                    <a href="{{ path('app_explore_items') }}" class="btn">Items</a>

                {% if app.user %}
                    <div class="collapse collapse-arrow border border-base-200 rounded-box">
                        <input type="checkbox" />
                        <div class="collapse-title text-base font-medium">{{ app.user.username }} ({{ app.user.email }})</div>
                        <div class="collapse-content p-2">
                            <div class="flex flex-col gap-4">
                                <a href="{{ path('app_profile_show') }}" class="btn">Profile</a>
                                <a href="{{ path('app_kit_index') }}" class="btn">My Kits</a>
                                <a href="{{ path('app_item_index') }}" class="btn">My Items</a>
                                {% if app.user.admin %}
                                    <a href="{{ path('app_item_suggestions') }}" class="btn">Items Suggestions</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                {% endif %}
                {% if app.user %}
                    <a href="{{ path('app_logout') }}" class="btn btn-primary">Logout</a>
                {% else %}
                    <a href="{{ path('app_login') }}" class="btn btn-primary">Login</a>
                    <a href="{{ path('app_register') }}" class="btn">Register</a>
                {% endif %}
            </nav>
        </aside>
    </div>
</header>
